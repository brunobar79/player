<html>
<head>
  <script src="https://unpkg.com/wavesurfer.js"></script>
  <style>
      .button-content {
        box-sizing: border-box;
        height: 74px;
        border-color: transparent transparent transparent transparent;
        transition: 100ms all ease;
        will-change: border-width;
        cursor: pointer;
        border-style: solid;
        border-width: 37px 0 37px 60px;
        background: transparent;
        margin-left: 30px;
      }

      .pause {
        border-style: double;
        border-width: 0px 0 0px 60px;
        margin-left: 15px;
      }

      #button-content:focus {
        outline: 0px;
      }
      
      #button {
          margin: auto;
          flex: 0;
          display: flex;
          padding: 38px;
          border-radius: 100px;
          background: rgba(0,0,0,.05);
          width: 120px;
          align-items: center;
          justify-content: center;
          height: 120px;
      }
    
      div#waveform {
        margin-top: 300px;
        margin-bottom: 180px;
      }

  </style>
</head>
<body style="background-color: transparent">
  <div id="waveform"></div>
  <div id="button">
    <button id='button-content' class='button-content'></button>
  </div>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const waveColor = urlParams.get('waveColor');
    const progressColor = urlParams.get('progressColor');
    const cursorColor = urlParams.get('cursorColor');
    const buttonColor = urlParams.get('buttonColor');
    const barWidth = urlParams.get('barWidth');
    const options = {
        container: '#waveform',
        waveColor: waveColor && `#${waveColor}` || 'violet',
        progressColor: progressColor && `#${progressColor}` || 'purple',
        cursorColor: cursorColor && `#${cursorColor}` || '#fff',
        barWidth: barWidth || 10,
        closeAudioContext: true
    };
    
    console.log(options);


    const wavesurfer = WaveSurfer.create(options);
    const uri = decodeURIComponent(urlParams.get('url'));
    wavesurfer.load(uri);
    let playing = false;

    const button = document.getElementById('button');
    const buttonContent = document.getElementById('button-content');
    buttonContent.style.borderColor = `transparent transparent transparent ${buttonColor && ('#' + buttonColor) || 'black'}`;
    button.addEventListener('click', () => {
      if(!playing) {
        wavesurfer.play();
      } else {
        wavesurfer.pause();
      }
      playing = !playing;
      buttonContent.classList.toggle('pause');
    });
  </script>
</body>
</html>
